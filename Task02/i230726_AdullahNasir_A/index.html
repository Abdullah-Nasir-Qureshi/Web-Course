<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        html, body{
            height: 100%;
            margin: 0;
        }
        body{
            background-color:beige;
            justify-content: center;
            display: flex;
            align-items: center;
            flex-direction: column;
            justify-content: space-between;
            height: 100vh;
            margin: 0;
        }
        .Game-Screen{
            position: relative;
            display: flex;
            height: 90%;
            width: 90%;
            border: 3px;
            top: 10px;
            border-radius: 5px;
            border-style: solid;
            border-color: brown;
            background-image: url(day.avif);
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            
        }
        .score{
            position: absolute;
            top: 10px;
            height: 30px;
            min-width: 100px;
            max-width: 200px;
            
            left: 50%;
            transform: translateX(-50%);
            background-color: rgb(109, 16, 16);
            border-style: solid;
            border-color: black;
            border-radius: 20px;
            padding: 2px 5px;
            
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap; 
            display: flex;
            justify-content: center;
            align-items: center;
            color:aliceblue;
        }
        .archer{
            position: absolute;
            height: 80px;
            width: 80px;
            top: 50%;
            left:10%;
            background-image: url(archer2.png);
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        .target{
            position: absolute;
            height: 80px;
            width: 80px;
            top: 50%;
            right:10%;
            background-image: url(board.png);
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        .arrow{
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url(arrow.png);
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center; 
            display: none; 
        }
        .buttons{
            display: flex;
        }
        #Start{
            margin: 30px 50px;
            height: 50px;
            width: 100px;
            border-radius: 20px;
            background-color: greenyellow;
        }
        .speed{
            margin: 30px 50px;
            height: 50px;
            width: 150px;
            border-radius: 20px;
            background-color: greenyellow;
            border: 2px solid black;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 5px;
            box-sizing: border-box;
        }
        #SpeedUp, #SpeedDown {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            padding: 0;           
            font-weight: bold;
        }

    </style>
</head>

<body>
    <div class="Game-Screen">
        <div class="score"><span id="scoreValue">Score: 0</span></div>
        <div class="archer"></div>
        <div class="target"></div>
        <div class="arrow"></div>
    </div>
    <div class="buttons">
        <button id="Start">Start/Stop</button>
        <div class="speed">
            <button id="SpeedUp">+</button>
            <label>Speed</label>
            <button id="SpeedDown">-</button>
        </div>
        
    </div>
    
    
</body>

<script>
    const target = document.querySelector('.target');
    const speedUpButton = document.getElementById('SpeedUp');
    const speedDownButton = document.getElementById('SpeedDown');
    let score = 0;

    target.style.top= '300px';
    let movingSpeed = 2;   
    let movingDirection = 1;   
    let moving = false;

    const arrow = document.querySelector('.arrow');
    let arrowSpeed = 10;
    let arrowMoving = false;

    document.getElementById('Start').addEventListener('click', () => {
        moving = !moving;
    });

    const move = setInterval(()=>{
        if (!moving) return;

        let targetTop = parseInt(target.style.top);
        const gameScreen = document.querySelector('.Game-Screen');
        const screenTop = gameScreen.clientHeight - target.offsetHeight;

        targetTop += movingSpeed * movingDirection;

        if (targetTop <= 0) movingDirection = 1;
        if (targetTop >= screenTop) movingDirection = -1;

        target.style.top = targetTop + 'px';
    }, 20); 

    speedUpButton.addEventListener('click', () => { if(movingSpeed <= 5) movingSpeed += 1 });
    speedDownButton.addEventListener('click', () => { if(movingSpeed > 1) movingSpeed -= 1; });


    const archer = document.querySelector('.archer');
    const gameScreen = document.querySelector('.Game-Screen');

    gameScreen.addEventListener('mousemove', (e) => {

        const gameRect = gameScreen.getBoundingClientRect();
        const mouseX = e.clientX - gameRect.left;
        const mouseY = e.clientY - gameRect.top;

        const archerX = archer.offsetLeft + archer.offsetWidth / 2;
        const archerY = archer.offsetTop + archer.offsetHeight / 2;

        // Calculate angle between archer and cursor
        const dx = mouseX - archerX;
        const dy = mouseY - archerY;
        const angleDeg = Math.atan2(dy, dx);  
        const angleRad = angleDeg * (180 / Math.PI);

        // Rotate archer
        archer.style.transform = `rotate(${angleRad}deg)`;
    });

        
    gameScreen.addEventListener('click', (e) => {
    if (arrowMoving) return;

    arrowMoving = true;
    arrow.style.display = 'block';

    const archerX = archer.offsetLeft + archer.offsetWidth / 2;
    const archerY = archer.offsetTop + archer.offsetHeight / 2;

    arrow.style.left = archerX + 'px';
    arrow.style.top = archerY + 'px';

    const gameRect = gameScreen.getBoundingClientRect();
    const mouseX = e.clientX - gameRect.left;
    const mouseY = e.clientY - gameRect.top;
    const dx = mouseX - archerX;
    const dy = mouseY - archerY;
    const angle = Math.atan2(dy, dx); // in radians

    // Rotate arrow
    arrow.style.transform = `rotate(${angle * 180 / Math.PI}deg)`;

    // Move arrow
    const moveArrow = setInterval(() => {
        let x = parseFloat(arrow.style.left);
        let y = parseFloat(arrow.style.top);

        x += arrowSpeed * Math.cos(angle);
        y += arrowSpeed * Math.sin(angle);

        arrow.style.left = x + 'px';
        arrow.style.top = y + 'px';

        const arrowLeft = x;
        const arrowTop = y;

        const targetLeft = target.offsetLeft;
        const targetTop = target.offsetTop;
        const targetRight = targetLeft + target.offsetWidth;
        const targetBottom = targetTop + target.offsetHeight;

        // Check collision
        if (
            arrowLeft >= targetLeft &&
            arrowLeft <= targetRight &&
            arrowTop >= targetTop &&
            arrowTop <= targetBottom
        ) {
            // Hit target
            clearInterval(moveArrow);
            arrow.style.display = 'none';
            arrowMoving = false;
            score++; // optionally
            document.getElementById('scoreValue').textContent = "Score: " + score;

        }

        if (
            arrowLeft < 0 || arrowLeft >= gameScreen.clientWidth-10 ||
            arrowTop < 0 || arrowTop >= gameScreen.clientHeight
        ) {
            clearInterval(moveArrow);
            arrow.style.display = 'none';
            arrowMoving = false;
        }

    }, 20);
});


</script>


</html>